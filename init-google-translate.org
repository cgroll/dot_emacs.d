#+TITLE: google-translate initialization

Define default languages:
#+BEGIN_SRC emacs-lisp
  (setq google-translate-default-source-language "en")
  (setq google-translate-default-target-language "de")
#+END_SRC

Define function for vocabulary exportation.
#+BEGIN_SRC emacs-lisp
  (defun cg/translate-and-export ()
     "google translation of english word and exportation to vocabulary
  list"
     (interactive)
  
     ;; get sentence and word
     (let (word sentence beg_sent end_sent)
        (setq word (word-at-point))
        (save-excursion
           (backward-sentence)
           (backward-char)
           (setq beg_sent (point))
           (forward-sentence)
           (setq end_sent (point))
           (setq sentence (substring (buffer-string) beg_sent end_sent))
           )
  
        (save-excursion
           ;; translate word
           (google-translate-at-point)
  
           ;; get main translation results
           (switch-to-buffer "*Google Translate*")
           (goto-char (search-forward "1"))
           (push-mark)
           (next-line 3)
           (move-end-of-line nil)
           (kill-ring-save (mark) (point))
  
           ;; refine translation results
           (switch-to-buffer "g-transl-refine")
           (yank)
           (exchange-point-and-mark)
           (org-table-convert-region (point) (mark))
           (org-table-delete-column)
           (org-table-cut-region (+ (point-min) 1) (- (point-max) 2))
           (kill-buffer "g-transl-refine")
           
           ;; insert into vocabulary
           (find-file "~/org/vocabulary.org")
           (end-of-buffer)
           (search-backward "|")
           (forward-char)
           (org-table-insert-hline)
           (next-line)
           (org-table-next-field)
           (insert word)
           (org-table-next-field)
           (org-table-paste-rectangle)
           (org-table-next-field)
           
           ;; ;; refine sentence format
           (switch-to-buffer "g-transl-refine")
           (beginning-of-buffer)
           (set-mark (point))
           (set-fill-column 40)
           (insert sentence)
           (exchange-point-and-mark)
           (fill-paragraph nil)
           (org-table-convert-region (point-min) (point-max) '(16))
           (org-table-cut-region (+ (point-min) 1) (- (point-max) 2))
           (switch-to-buffer "vocabulary.org")
  
           (org-table-paste-rectangle)
           (kill-buffer "g-transl-refine")
           )
        )
     )
#+END_SRC

#+BEGIN_SRC emacs-lisp
  (global-unset-key "\C-t")
  (global-set-key (kbd "C-t j") 'cg/translate-and-export)
  (global-set-key (kbd "C-t l")
     'google-translate-query-translate-reverse)
  (global-set-key (kbd "C-t L") 'google-translate-query-translate)
  (global-set-key (kbd "C-t K") 'google-translate-at-point)
  (global-set-key (kbd "C-t k") 'google-translate-at-point-reverse)
#+END_SRC


;; ;; added for translate-and-export macro
;; (fset 'translate-and-export
;;    [?\M-f ?\M-b ?\C-  ?\M-f ?\M-w ?\M-e ?\C-  ?\M-x ?b ?a ?c ?k ?w ?a ?r ?d ?- ?s ?e ?n ?t ?e ?n ?c ?e return ?\M-x ?s ?e ?a ?r ?c ?h ?- ?f ?o ?r ?w ?a ?r ?d ?- ?r ?e ?g ?e ?x ?p return ?\[ ?a ?: backspace ?- ?u backspace ?z ?| ?A ?- ?Z return ?\C-b ?\M-w ?\C-x ?\C-f ?~ ?/ ?o ?r ?g ?/ ?r ?s ?s ?/ ?v ?o ?c ?a ?b ?u ?l ?a ?r ?y ?. ?o ?r ?g return ?\M-> ?\C-r ?| ?\C-m ?\C-f ?\C-  ?\M-> ?\C-d return ?| ?\C-y ?\M-y tab ?\C-x ?r ?m ?v ?o ?c ?a ?b ?_ ?m ?e ?a ?n ?i ?n ?g return tab ?\C-x ?r ?m ?v ?o ?c ?a ?b ?_ ?s ?e ?n ?t ?e ?n ?c ?e return ?\M-x ?s ?e ?t ?- ?v ?a ?r ?i ?a ?b ?l ?e return ?f ?i ?l ?l ?- ?c ?o ?l ?u ?m ?n return ?5 ?0 return ?\C-e return return ?\C-x ?r ?m ?v ?o ?c ?a ?b ?_ ?t ?a ?b ?l ?e ?e ?n ?d return ?\C-y ?\C-u ?- ?1 ?\M-y ?\C-  ?\C-x ?r ?b ?v ?o ?c ?a ?b ?_ ?t ?a ?b ?l ?e ?e ?n ?d return ?\M-q ?\C-  ?\C-x ?r ?b ?v ?o ?c ?a ?b ?_ ?t ?a ?b ?l ?e ?e ?n ?d return ?\C-u ?1 ?0 ?\C-u ?\C-c ?| ?\C-  ?\C-  ?\C-p return ?\C-x ?r ?m ?v ?o ?c ?a ?b ?_ ?t ?a ?b ?l ?e ?e ?n ?d return ?\C-u ?\C-  ?\C-  ?\M-> ?\C-r ?| ?\C-b ?\C-c ?\C-x ?\C-w ?\C-x ?r ?b ?v ?o ?c ?a ?b ?_ ?t ?a ?b ?l ?e ?e ?n ?d return ?\C-  ?\M-> ?\C-d ?\C-x ?r ?b ?v ?o ?c ?a ?b ?_ ?s ?e ?n ?t ?e ?n ?c ?e return ?\C-c ?\C-x ?\C-y ?\M-x ?g ?o ?o ?g ?l ?e ?- ?t ?r ?a ?n ?s ?l ?a ?t ?e return ?\C-y ?\M-y return ?\C-x ?o ?\C-n ?\C-n ?\C-n ?\C-n ?\C-  ?\C-e ?\M-w ?\C-x ?o ?\C-x ?r ?b ?v ?o ?c ?a ?b ?_ ?m ?e ?a ?i ?n backspace backspace ?n ?i ?n ?g return ?\C-y return ?\C-x ?o ?\C-n ?\C-a ?\C-  ?\C-e ?\M-w ?\C-x ?o ?\C-y return ?\C-x ?o ?\C-n ?\C-a ?\C-  ?\C-e ?\M-w ?\C-x ?o ?\C-y return ?\C-x ?o ?\C-n ?\C-a ?\C-  ?\C-e ?\M-w ?\C-x ?o ?\C-y ?\C-c ?\C-c ?\M-> ?\M-x ?s ?e ?a ?r ?c ?h ?- ?b ?a ?c ?k ?w ?a ?r ?d ?- ?r ?e ?g ?e ?x ?p return ?\[ ?a ?- ?z ?| ?A ?- ?Z return ?\C-e ?\M-> ?\C-r ?| ?\C-m ?\C-c ?- ?\C-x ?b return])

;; (global-set-key "\C-xt" 'translate-and-export)
